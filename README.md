7 лаба

демонстрация кода - https://drive.google.com/drive/u/0/folders/1ZNmt1ypuQZlJM7TwIyoh-byFW-xKx3vu

Условия 7-ой лабы: Часть 1 Программу, разработанную в лабораторной работе No 6, преобразовать следующим образом: для обеспечения движения геометрических фигур в окне вместо таймера использовать потоки. Для каждой геометрической фигуры использовать свой поток. Потоковая функция должна быть одна, объект «Фигура» передается в потоковую функцию через параметр (для передачи дополнительных данных в потоковую функцию в качестве параметра можно задать указатель на структуру). При необходимости использовать синхронизацию. Часть 2 Необходимо обеспечить синхронизацию двух приложений. Первое приложение. Приложение с потоками преобразовать так, чтобы движение фигур в потоках начиналось не сразу, а после получения сигнала от второго приложения. При получения сигнала потоки начинают работать до тех пор, пока от второго приложения не придет другой сигнал, при получении второго сигнала потоки завершают свою работу. Второе приложение – консольное приложение Windows (запускается только при запущенном первом приложении). После нажатия клавиши посылается сигнал для начала работы потоков в первом приложении. После следующего нажатия клавиши посылается сигнал на завершение работы потоков в первом приложении. Продемонстрировать совместную работу двух приложений.

Алгоритм шагов в коде:

1. Включение необходимых заголовочных файлов.
2. Определение функции main.
3. Инициализация переменной hEvent типа HANDLE.
4. Установка локали для вывода сообщений на русском языке.
5. Открытие события с помощью функции OpenEvent и сохранение дескриптора в переменную hEvent.
6. Проверка успешности открытия события. Если hEvent равно 0, выводится сообщение об ошибке и программа завершается.
7. Запуск бесконечного цикла while (true).
8. Вывод меню с помощью cout для выбора опции запуска или завершения потоков.
9. Чтение выбранной опции из консоли с помощью cin и сохранение значения в переменную sw.
10. Проверка значения переменной sw:
    - Если sw равно 1, выводится сообщение о запуске потоков и вызывается функция SetEvent для установки события.
    - Если sw равно 2, выводится сообщение о завершении потоков, вызывается функция ResetEvent для сброса события и программа завершается.
    - Если sw не равно ни 1, ни 2, программа завершается.
11. Завершение функции main и программы.
